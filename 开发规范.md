# 项目开发规范说明

## 1. 代码风格与格式化（Prettier）

- 统一使用 Prettier 自动格式化代码。
- 主要风格：
  - 使用分号（;）
  - 单引号（'）
  - 每行最大 120 字符
  - 缩进为 2 个空格
  - 对象大括号有空格
  - 箭头函数参数总带括号
- 推荐在编辑器中安装 Prettier 插件，保存时自动格式化。
- 手动格式化命令：
  ```bash
  pnpm format
  # 或
  pnpm exec prettier --write src
  ```

## 2. 语法检查（ESLint）

- 统一使用 ESLint 检查代码规范和潜在错误。
- 主要规则：
  - 必须使用分号
  - 单引号
  - 变量未使用警告
  - 禁止未定义的全局变量（已允许 uni）
  - console 仅警告
  - 代码最大行宽 120
- 手动检查和修复命令：
  ```bash
  pnpm lint
  pnpm exec eslint --fix src
  ```

## 3. Git 提交规范

- 提交信息需符合 Conventional Commits 规范，如：
  - `feat: 新功能`
  - `fix: 修复 bug`
  - `docs: 文档变更`
  - `style: 代码格式`
  - `refactor: 重构`
- 推荐使用 Commitizen 工具提交：
  ```bash
  pnpm run commit
  ```
- 提交前会自动执行 lint 检查和格式化，未通过无法提交。

## 4. 代码提交流程

1. 修改代码后，先执行：
   ```bash
   git add .
   ```
2. 使用 Commitizen 提交：
   ```bash
   pnpm run commit
   # 或
   git commit -m "feat: xxx"
   ```
3. 提交前会自动 lint 检查和格式化。

## 5. 常见问题与解决办法

- **lint 报错**：运行 `pnpm exec eslint --fix src` 自动修复，大部分风格问题可自动修复。
- **格式化不生效**：检查编辑器是否安装 Prettier 插件，或手动运行 `pnpm format`。
- **uni 未定义报错**：已在 ESLint 配置中声明 `uni` 为全局变量。
- **console 报警告**：开发阶段允许，生产建议移除。

## 6. 相关配置文件说明

- `.prettierrc`：Prettier 格式化规则
- `.eslintrc.js`：ESLint 语法检查规则
- `lint-staged`：提交前自动 lint/格式化的文件范围
- `commitlint.config.js`：Git 提交信息规范
- `package.json`：包含 lint/format/commit 等脚本

---

如有疑问或需调整规则，请联系项目维护者或在团队内讨论后统一修改。
